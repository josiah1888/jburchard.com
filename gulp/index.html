<!DOCTYPE html>
<html lang="en" ng-app="jburchard">
<head>
    <meta charset="UTF-8">
    <title>JBurchard.com</title>
    <link rel="stylesheet" href="/lib/css/bootstrap.css">
    <link rel="stylesheet" href="/lib/css/flexboxgrid.css">
    <link rel="stylesheet" href="/lib/css/font-awesome.min.css">
    <link rel="stylesheet" href="/app.css">
</head>
<body>
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-4 col-md-2 sidebar last-xs first-sm center-xs start-sm full-width">
            <div class="side-card text-center">
                <img class="img-circle" src="/assets/ninja-man.jpg"/>

                <h3>Josiah Burchard</h3>
                <h4>Software Developer</h4>
            </div>
            <ul class="nav nav-sidebar">
                <li><a href="/about">About Me</a></li>
                <li><a href="/gulp">Generic Gulp</a></li>
                <li><a href="/taptap">TapTap</a></li>
                <li><a href="https://github.com/josiah1888">Contact</a></li>
            </ul>
        </div>
        <div class="col-xs-12 visible-xs top-bar">
            <div class="padding-small">

                <h4 class="pull-left margin-none display-inline-block">JBurchard.com</h4>

                <ul class="list-inline display-inline-block pull-right">
                    <li><a href="/about">About Me</a></li>
                    <li><a href="/gulp">Generic Gulp</a></li>
                    <li><a href="/taptap">TapTap</a></li>
                    <li><a href="https://github.com/josiah1888">Contact</a></li>
                </ul>
            </div>
        </div>
        <div class="col-sm-8 col-md-10">
            <section class="jumbotron">
                <h1>Generic Gulp</h1>
                <p>Gulp is a great tool to for every part of the production pipeline. You can lint, copy files, optimize and more - but there can be tons of duplication between projects or even between separated apps with a single project.</p>
                <p>To support multiple apps and projects without building technical debt, I developed a gulp task generator to reuse the same task logic over multiple projects. To get started, here's what you need:</p>
                <ul>
                    <li>gulp-task-generator.js</li>
                    <li>gulp-tasks.js</li>
                    <li>And a gulp.config.js file for each project</li>
                </ul>

                <p>Let's do a general overview of what each file does, and then we'll see how to code it.</p>

            </section>

            <section class="jumbotron">
                <h2>Gulp Task Generator</h2>

                <p>In order to use gulp on each of your projects, you need to create a gulp task for each and every project. When you're starting out, you might have something like this</p>
<pre>
<code>
gulp.task('public', function() {
 return gulp
  .src('src/public/**/*.*')
  .pipe(gulp.dest('build/public');
});

gulp.task('account', function() {
 return gulp
  .src('src/account/**/*.*')
  .pipe(gulp.dest('build/account');
});

gulp.task('super-user', function() {
 return gulp
  .src('src/super-user/**/*.*')
  .pipe(gulp.dest('build/super-user');
});
</code>
</pre>
                <p>Hopefully, your inner developer will force you to do something about this obvious repetition. If we can exact all of the differences between these functions into variables, we can write the function once and throw the whole thing in a loop.</p>
                <h4>Removing the app-specific values from the tasks</h4>
<pre>
<code>
var public = 'public', account = 'account', superUser = 'super-user';
gulp.task(public, function() {
return gulp
.src('src/' + public + '/**/*.*')
.pipe(gulp.dest('build/' + public);
});

gulp.task(account, function() {
return gulp
.src('src/'+ account + '/**/*.*')
.pipe(gulp.dest('build/' + account);
});

gulp.task(super-user, function() {
return gulp
.src('src/' + superUser + '/**/*.*')
.pipe(gulp.dest('build/' + superUser);
});
</code>
</pre>
                <h4>Wrap the gulp task in a reusable function</h4><pre>
<code>
var public = 'public', account = 'account', superUser = 'super-user';

copyFiles(public);
copyFiles(account);
copyFiles(superUser);

function copyFiles(path) {
 gulp.task(path, function() {
  return gulp
   .src('src/' + path + '/**/*.*')
   .pipe(gulp.dest('build/' + path);});
}
</code>
</pre>
                <p>Now we have some sort of code automation, which is way better than where we started! Let's clean things up just a bit more before we move on</p>
<pre>
<code>
var areas = ['public', 'account', 'super-user'];

areas.forEach(copyFiles);

function copyFiles(path) {
 gulp.task(path, function() {
  return gulp
   .src(`src/${path}/**/*.*`)
   .pipe(gulp.dest(`build/${path}`);});
 }
}
</code>
</pre>
                <p>Man, that looks nice.</p>
            </section>

            <section class="jumbotron">
                <h2>Gulp Tasks</h2>
                <p>Now that our Gulp Task Generator is up and running, we can extract even further and pull all of the javascript logic out to another file, gulp-tasks.js</p>
                <p>Keeping a separation between logic and framework helps keep files smaller and easier to manage. But since you're an expert developer, I don't have to tell you that.</p>
                <span class="h2">To be continued... check back soon!</span>
<pre>
<code>
module.exports = function() {
    var tasks = {
        copyFiles: copyFiles,
        lint: lint,
        clean: clean
    };
    return tasks;

    function copyFiles(path) {
        return gulp
            .src(`src/${path}/**/*.*`)
            .pipe(gulp.dest(`build/${path}`);
        });
    }

    function lint(files) {

    }

    function clean(files) {

    }
}
</code>
</pre>
            </section>
        </div>
    </div>
</div>
<script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date();
        a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-66456533-1', 'auto');
    ga('send', 'pageview');
</script>
</body>
</html>